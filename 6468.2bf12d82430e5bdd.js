"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6468],{6468:(_,d,m)=>{m.r(d),m.d(d,{Camera:()=>h,CameraWeb:()=>f});var l=m(5861),p=m(2726),u=m(5961);class f extends p.Uw{getPhoto(e){var t=this;return(0,l.Z)(function*(){var a;return new Promise(function(o,i){return(a=a||(0,l.Z)(function*(r,n){if(e.webUseInput||e.source===u.oK.Photos)t.fileInputExperience(e,r);else if(e.source===u.oK.Prompt){var s;let c=document.querySelector("pwa-action-sheet");c||(c=document.createElement("pwa-action-sheet"),document.body.appendChild(c)),c.header=e.promptLabelHeader||"Photo",c.cancelable=!1,c.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],c.addEventListener("onSelection",function(y){return(s=s||(0,l.Z)(function*(b){0===b.detail?t.fileInputExperience(e,r):t.cameraExperience(e,r,n)})).apply(this,arguments)})}else t.cameraExperience(e,r,n)})).apply(this,arguments)})})()}pickImages(e){var t=this;return(0,l.Z)(function*(){var a;return new Promise(function(o){return(a=a||(0,l.Z)(function*(i){t.multipleFileInputExperience(i)})).apply(this,arguments)})})()}cameraExperience(e,t,a){var o=this;return(0,l.Z)(function*(){if(customElements.get("pwa-camera-modal")){const r=document.createElement("pwa-camera-modal");r.facingMode=e.direction===u.GW.Front?"user":"environment",document.body.appendChild(r);try{var i;yield r.componentOnReady(),r.addEventListener("onPhoto",function(n){return(i=i||(0,l.Z)(function*(s){const c=s.detail;null===c?a(new p.xz("User cancelled photos app")):c instanceof Error?a(c):t(yield o._getCameraPhoto(c,e)),r.dismiss(),document.body.removeChild(r)})).apply(this,arguments)}),r.present()}catch{o.fileInputExperience(e,t)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),o.fileInputExperience(e,t)})()}fileInputExperience(e,t){let a=document.querySelector("#_capacitor-camera-input");const o=()=>{var i;null===(i=a.parentNode)||void 0===i||i.removeChild(a)};a||(a=document.createElement("input"),a.id="_capacitor-camera-input",a.type="file",a.hidden=!0,document.body.appendChild(a),a.addEventListener("change",i=>{const r=a.files[0];let n="jpeg";if("image/png"===r.type?n="png":"image/gif"===r.type&&(n="gif"),"dataUrl"===e.resultType||"base64"===e.resultType){const s=new FileReader;s.addEventListener("load",()=>{if("dataUrl"===e.resultType)t({dataUrl:s.result,format:n});else if("base64"===e.resultType){const c=s.result.split(",")[1];t({base64String:c,format:n})}o()}),s.readAsDataURL(r)}else t({webPath:URL.createObjectURL(r),format:n}),o()})),a.accept="image/*",a.capture=!0,e.source===u.oK.Photos||e.source===u.oK.Prompt?a.removeAttribute("capture"):e.direction===u.GW.Front?a.capture="user":e.direction===u.GW.Rear&&(a.capture="environment"),a.click()}multipleFileInputExperience(e){let t=document.querySelector("#_capacitor-camera-input-multiple");t||(t=document.createElement("input"),t.id="_capacitor-camera-input-multiple",t.type="file",t.hidden=!0,t.multiple=!0,document.body.appendChild(t),t.addEventListener("change",o=>{const i=[];for(let r=0;r<t.files.length;r++){const n=t.files[r];let s="jpeg";"image/png"===n.type?s="png":"image/gif"===n.type&&(s="gif"),i.push({webPath:URL.createObjectURL(n),format:s})}e({photos:i}),(()=>{var o;null===(o=t.parentNode)||void 0===o||o.removeChild(t)})()})),t.accept="image/*",t.click()}_getCameraPhoto(e,t){return new Promise((a,o)=>{const i=new FileReader,r=e.type.split("/")[1];"uri"===t.resultType?a({webPath:URL.createObjectURL(e),format:r,saved:!1}):(i.readAsDataURL(e),i.onloadend=()=>{const n=i.result;a("dataUrl"===t.resultType?{dataUrl:n,format:r,saved:!1}:{base64String:n.split(",")[1],format:r,saved:!1})},i.onerror=n=>{o(n)})})}checkPermissions(){var e=this;return(0,l.Z)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw e.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw e.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var e=this;return(0,l.Z)(function*(){throw e.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var e=this;return(0,l.Z)(function*(){throw e.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var e=this;return(0,l.Z)(function*(){throw e.unavailable("Not implemented on web.")})()}}const h=new f}}]);